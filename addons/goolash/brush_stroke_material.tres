[gd_resource type="ShaderMaterial" load_steps=2 format=3 uid="uid://8hs3p3kogtk3"]

[sub_resource type="Shader" id="Shader_cmcne"]
code = "shader_type canvas_item;
render_mode unshaded;

uniform sampler2D screen_texture : hint_screen_texture, repeat_disable, filter_nearest;
varying vec4 modulate;

void vertex() {
    modulate = COLOR;
}

void fragment() {
    COLOR.rgb = modulate.rgb;
    float a = 0.0;
    
    vec2 uv = SCREEN_UV;
    
    vec2 noise_uv = UV / 6.0;
    
    float frame = floor(TIME * 6.0);
    
    a += texture(screen_texture, uv).r * 2.0;
    for (float i = 0.0; i < 1.0; i += 1.0 / 3.0) {
        a += texture(screen_texture, uv + vec2(sin(i * TAU + 0.8 + frame), cos(i * TAU + 0.8 + frame)) * 1.5 * SCREEN_PIXEL_SIZE).r;
        a += texture(screen_texture, uv + vec2(sin(i * TAU + frame), cos(i * TAU + frame)) * 1.0 * SCREEN_PIXEL_SIZE).r;
    }
    a = smoothstep(0.2, 0.6, a / 6.0);
    
    COLOR.a = a * modulate.a;
}"
metadata/_edit_res_path = "res://addons/goulash/brush_stroke_material.tres::Shader_cmcne"

[resource]
shader = SubResource("Shader_cmcne")
